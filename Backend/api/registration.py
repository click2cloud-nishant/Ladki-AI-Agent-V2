"""
Ladki Bahin Yojana - Complete Application System (Language Selection: English/Hindi/Marathi)
FastAPI Backend with OCR, AI Parsing, Azure Blob Storage, and Database Integration
"""

from fastapi import FastAPI, UploadFile, File, Form
from fastapi.responses import JSONResponse
import os
import uuid
import re
import json
import logging
import shutil
import subprocess
from datetime import datetime, timedelta
from pathlib import Path
from typing import Optional, Dict, Any
from dotenv import load_dotenv
import io

# Load environment variables
load_dotenv()

# Azure Blob Storage
from azure.storage.blob import BlobServiceClient, ContentSettings, BlobSasPermissions, generate_blob_sas

# Tesseract OCR
import pytesseract
from PIL import Image
from pdf2image import convert_from_path

# Azure OpenAI for intelligent parsing
from openai import AzureOpenAI

# Setup logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# Database
try:
    from database import db_manager
    logger.info("‚úÖ Database module imported")
except Exception as e:
    logger.error(f"‚ùå Failed to import database module: {e}")


# ============================================
# MULTILINGUAL MESSAGES - MARATHI
# ============================================

MESSAGES_MARATHI = {
    "welcome": """üôè ‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§≤‡§æ‡§°‡§ï‡•Ä ‡§¨‡§π‡•Ä‡§£ ‡§Ø‡•ã‡§ú‡§®‡•á‡§§ ‡§Ü‡§™‡§≤‡•á ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á!

‚úÖ **‡§Ü‡§™‡§£ ‡§Ø‡§æ ‡§Ø‡•ã‡§ú‡§®‡•á‡§∏‡§æ‡§†‡•Ä ‡§™‡§æ‡§§‡•ç‡§∞ ‡§Ü‡§π‡§æ‡§§!**

‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§™‡§æ‡§Ø‡§∞‡•Ä‡§™‡§æ‡§Ø‡§∞‡•Ä‡§®‡•á ‡§Ö‡§∞‡•ç‡§ú ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•á‡§®.""",

    "document_info": """üìã **‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§™‡•Å‡§¢‡•á ‡§®‡•á‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä, ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ñ‡§æ‡§≤‡•Ä‡§≤ ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡•á ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á:**

1. ‚úÖ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°
2. ‚úÖ ‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏ ‡§™‡•Å‡§∞‡§æ‡§µ‡§æ (‡§Ø‡§æ‡§™‡•à‡§ï‡•Ä ‡§è‡§ï: ‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ / ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ / ‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§ì‡§≥‡§ñ‡§™‡§§‡•ç‡§∞ / ‡§ú‡§®‡•ç‡§Æ ‡§¶‡§æ‡§ñ‡§≤‡§æ / ‡§∂‡§æ‡§≥‡§æ ‡§∏‡•ã‡§°‡§≤‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§¶‡§æ‡§ñ‡§≤‡§æ)
3. ‚úÖ ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ (‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø, ‡§™‡§ø‡§µ‡§≥‡•á/‡§ï‡•á‡§∂‡§∞‡•Ä ‡§∞‡•á‡§∂‡§®‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§ø‡§µ‡§°‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡•ã‡§°‡•Ç‡§®)
4. ‚úÖ ‡§¨‡§Å‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï
5. ‚úÖ ‡§´‡•ã‡§ü‡•ã

üìù **‡§ö‡§≤‡§æ ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä‡§™‡§æ‡§∏‡•Ç‡§® ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§ ‡§ï‡§∞‡•Ç‡§Ø‡§æ.**

‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á **‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§µ** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°‡§æ‡§®‡•Å‡§∏‡§æ‡§∞):""",

    "name_confirmed": """‚úÖ ‡§®‡§æ‡§µ: **{name}**

üìÖ ‡§§‡•Å‡§Æ‡§ö‡•Ä **‡§ú‡§®‡•ç‡§Æ‡§§‡§æ‡§∞‡•Ä‡§ñ** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï/‡§Æ‡§π‡§ø‡§®‡§æ/‡§µ‡§∞‡•ç‡§∑):""",

    "dob_confirmed": """‚úÖ ‡§ú‡§®‡•ç‡§Æ‡§§‡§æ‡§∞‡•Ä‡§ñ: **{dob}** (‡§µ‡§Ø: {age})

üíç ‡§§‡•Å‡§Æ‡§ö‡•Ä **‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä** ‡§ï‡§æ‡§Ø ‡§Ü‡§π‡•á?

1. ‡§µ‡§ø‡§µ‡§æ‡§π‡§ø‡§§
2. ‡§Ö‡§µ‡§ø‡§µ‡§æ‡§π‡§ø‡§§
3. ‡§µ‡§ø‡§ß‡§µ‡§æ
4. ‡§ò‡§ü‡§∏‡•ç‡§´‡•ã‡§ü‡§ø‡§§

‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï (1-4) ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Ü‡§™‡§≤‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ:""",

    "marital_confirmed": """‚úÖ ‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: **{status}**

üì± ‡§§‡•Å‡§Æ‡§ö‡§æ **‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (10 ‡§Ö‡§Ç‡§ï):""",

    "mobile_confirmed": """‚úÖ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: **+91 {mobile}**

üìß ‡§§‡•Å‡§Æ‡§ö‡§æ **‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§Ø‡§°‡•Ä** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§µ‡§ó‡§≥‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä 'skip' ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ):""",

    "email_confirmed": """‚úÖ ‡§à‡§Æ‡•á‡§≤: **{email}**

üè† ‡§§‡•Å‡§Æ‡§ö‡§æ **‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§§‡•ç‡§§‡§æ** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ:""",

    "address_saved": """‚úÖ ‡§™‡§§‡•ç‡§§‡§æ ‡§ú‡§§‡§® ‡§ï‡•á‡§≤‡§æ!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÑ **‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§µ‡§ø‡§≠‡§æ‡§ó**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§â‡§§‡•ç‡§§‡§Æ! ‡§Ü‡§§‡§æ ‡§Ü‡§™‡§≤‡•Ä ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡•á ‡§ó‡•ã‡§≥‡§æ ‡§ï‡§∞‡•Ç‡§Ø‡§æ.

üîë ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï: **{app_id}**

üìé **‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ** (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® "Aadhaar Card" ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "aadhaar_success": """‚úÖ **‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á!**

**‡§ï‡§æ‡§¢‡§≤‡•á‡§≤‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§Ü‡§ß‡§æ‡§∞: {aadhaar}
‚Ä¢ ‡§®‡§æ‡§µ: {name}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏ ‡§™‡•Å‡§∞‡§æ‡§µ‡§æ**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏ ‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ **‡§è‡§ï** ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ:

1. ‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞
2. ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ
3. ‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§ì‡§≥‡§ñ‡§™‡§§‡•ç‡§∞
4. ‡§ú‡§®‡•ç‡§Æ ‡§¶‡§æ‡§ñ‡§≤‡§æ
5. ‡§∂‡§æ‡§≥‡§æ ‡§∏‡•ã‡§°‡§≤‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§¶‡§æ‡§ñ‡§≤‡§æ

‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (1-5):""",

    "domicile_selected": """‚úÖ ‡§®‡§ø‡§µ‡§°‡§≤‡•á: **{doc_name}**

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á **{doc_name}** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® '{doc_name}' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "domicile_success": """‚úÖ **{doc_name} ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á!**

**‡§ï‡§æ‡§¢‡§≤‡•á‡§≤‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞: {doc_type}
‚Ä¢ ‡§®‡§æ‡§µ: {name}
{extra_info}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á **‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® 'Income Certificate' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "ration_color": """‚úÖ **‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á!**

**‡§ï‡§æ‡§¢‡§≤‡•á‡§≤‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï: {card_number}
‚Ä¢ ‡§®‡§æ‡§µ: {name}

üé® **‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡•á‡§ö‡§æ ‡§∞‡§Ç‡§ó ‡§ï‡§æ‡§Ø ‡§Ü‡§π‡•á?**

1. ‡§™‡§ø‡§µ‡§≥‡§æ
2. ‡§ï‡•á‡§∂‡§∞‡•Ä
3. ‡§™‡§æ‡§Ç‡§¢‡§∞‡§æ

‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ (1-3):""",

    "ration_white": """‚úÖ ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: **{color}**

‚ö†Ô∏è **‡§™‡§æ‡§Ç‡§¢‡§±‡•ç‡§Ø‡§æ ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡•á‡§∏‡§æ‡§†‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á**

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á **‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® 'Income Certificate' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "ration_yellow_orange": """‚úÖ ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: **{color}**

‚úì {color} ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡•á‡§∏‡§æ‡§†‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§®‡§æ‡§π‡•Ä!
‚úì ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ‡§µ‡§∞‡•Ç‡§® ‡§ï‡§æ‡§¢‡§≤‡•á ‡§ú‡§æ‡§à‡§≤

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•Ä **‡§¨‡§Å‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï (‡§™‡§π‡§ø‡§≤‡•á ‡§™‡§æ‡§®)** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® 'Bank Passbook' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "income_success": """‚úÖ **‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á!**

**‡§ï‡§æ‡§¢‡§≤‡•á‡§≤‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§ï‡•ç‡§∞.: {cert_no}
‚Ä¢ ‡§®‡§æ‡§µ: {name}
‚Ä¢ ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§®: ‚Çπ{income}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•Ä **‡§¨‡§Å‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï (‡§™‡§π‡§ø‡§≤‡•á ‡§™‡§æ‡§®)** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® 'Bank Passbook' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "bank_success": """‚úÖ **‡§¨‡§Å‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á!**

**‡§ï‡§æ‡§¢‡§≤‡•á‡§≤‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§ñ‡§æ‡§§‡•á‡§ß‡§æ‡§∞‡§ï: {holder}
‚Ä¢ ‡§ñ‡§æ‡§§‡•á ‡§ï‡•ç‡§∞.: {account}
‚Ä¢ IFSC: {ifsc}
‚Ä¢ ‡§¨‡§Å‡§ï: {bank}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡§æ **‡§™‡§æ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§Ü‡§ï‡§æ‡§∞‡§æ‡§ö‡§æ ‡§´‡•ã‡§ü‡•ã** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ (JPG/PNG)

üìé ‡§¨‡§ü‡§£ ‡§µ‡§æ‡§™‡§∞‡§æ ‡§Ü‡§£‡§ø ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§®‡§Æ‡§ß‡•Ç‡§® 'Photograph' ‡§®‡§ø‡§µ‡§°‡§æ.""",

    "photo_success": """‚úÖ **‡§´‡•ã‡§ü‡•ã ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡§æ!**

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **‡§Ö‡§∞‡•ç‡§ú ‡§´‡•â‡§∞‡•ç‡§Æ - ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§™‡•Å‡§®‡§∞‡§æ‡§µ‡§≤‡•ã‡§ï‡§®**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

**‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§§‡§™‡§∂‡•Ä‡§≤:**
‚úì ‡§®‡§æ‡§µ: {name}
‚úì ‡§ú‡§®‡•ç‡§Æ‡§§‡§æ‡§∞‡•Ä‡§ñ: {dob} (‡§µ‡§Ø: {age})
‚úì ‡§Ü‡§ß‡§æ‡§∞: {aadhaar}
‚úì ‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä: {marital}

**‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§§‡§™‡§∂‡•Ä‡§≤:**
‚úì ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: +91 {mobile}
‚úì ‡§à‡§Æ‡•á‡§≤: {email}
‚úì ‡§™‡§§‡•ç‡§§‡§æ: {address}

**‡§¨‡§Å‡§ï ‡§§‡§™‡§∂‡•Ä‡§≤:**
‚úì ‡§ñ‡§æ‡§§‡•á ‡§ï‡•ç‡§∞.: {account}
‚úì IFSC: {ifsc}
‚úì ‡§¨‡§Å‡§ï: {bank}
‚úì ‡§Ü‡§ß‡§æ‡§∞-‡§¨‡§Å‡§ï ‡§¶‡•Å‡§µ‡§æ: ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‚úì

**‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§§‡§™‡§∂‡•Ä‡§≤:**
‚úì ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§®: ‚Çπ{income}
‚úì ‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ: {ration}

**‡§ú‡•ã‡§°‡§≤‡•á‡§≤‡•Ä ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡•á ({count}):**
{doc_list}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§µ‡§∞‡•Ä‡§≤ ‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§¨‡§∞‡•ã‡§¨‡§∞ ‡§Ü‡§π‡•á ‡§ï‡§æ?

‡§™‡•Å‡§¢‡•á ‡§ú‡§æ‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'YES'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§¨‡§¶‡§≤ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'NO'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ:""",

    "declaration": """‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìù **‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§µ‡§ø‡§≠‡§æ‡§ó - ‡§ò‡•ã‡§∑‡§£‡§æ**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§Æ‡•Ä ‡§Ø‡§æ‡§¶‡•ç‡§µ‡§æ‡§∞‡•á ‡§ò‡•ã‡§∑‡§ø‡§§ ‡§ï‡§∞‡§§‡•ã ‡§ï‡•Ä:

‚úì ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡•á‡§≤‡•á‡§≤‡•Ä ‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§∏‡§§‡•ç‡§Ø ‡§Ü‡§£‡§ø ‡§¨‡§∞‡•ã‡§¨‡§∞ ‡§Ü‡§π‡•á
‚úì ‡§ñ‡•ã‡§ü‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§¶‡§ø‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§≤‡§æ‡§≠ ‡§∞‡§¶‡•ç‡§¶ ‡§π‡•ã‡§ä ‡§∂‡§ï‡§§‡•ã ‡§π‡•á ‡§Æ‡§≤‡§æ ‡§∏‡§Æ‡§ú‡§§‡•á
‚úì ‡§Æ‡•Ä ‡§Ö‡§ü‡•Ä ‡§µ ‡§∂‡§∞‡•ç‡§§‡•Ä ‡§µ‡§æ‡§ö‡§≤‡•ç‡§Ø‡§æ ‡§Ü‡§π‡•á‡§§ ‡§Ü‡§£‡§ø ‡§§‡•ç‡§Ø‡§æ‡§Ç‡§®‡§æ ‡§∏‡§π‡§Æ‡§§ ‡§Ü‡§π‡•á

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìù ‡§™‡•Å‡§∑‡•ç‡§ü‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'I AGREE'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ:""",

    "declaration_accepted": """‚úì **‡§ò‡•ã‡§∑‡§£‡§æ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞‡§≤‡•Ä**

‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'SUBMIT'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ:""",

    "aadhaar_exists": """‚ùå **‡§Ö‡§∞‡•ç‡§ú ‡§Ö‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä!**

‡§Ø‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï‡§æ‡§∏‡§π ‡§Ö‡§∞‡•ç‡§ú ‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä‡§§ ‡§Ü‡§ß‡•Ä‡§ö ‡§Ö‡§∏‡•ç‡§§‡§ø‡§§‡•ç‡§µ‡§æ‡§§ ‡§Ü‡§π‡•á.

‡§ú‡§∞ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§µ‡§æ‡§ü‡§§ ‡§Ö‡§∏‡•á‡§≤ ‡§ï‡•Ä ‡§π‡•Ä ‡§ö‡•Ç‡§ï ‡§Ü‡§π‡•á, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®‡§∂‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡§æ.

‡§µ‡•á‡§ó‡§≥‡•ç‡§Ø‡§æ ‡§§‡§™‡§∂‡•Ä‡§≤‡§æ‡§Ç‡§∏‡§π ‡§®‡§µ‡•Ä‡§® ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ.""",

    "success": """‚è≥ ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•ã‡§§...

‚úì ‡§∏‡§∞‡•ç‡§µ ‡§§‡§™‡§∂‡•Ä‡§≤‡§æ‡§Ç‡§ö‡•Ä ‡§™‡§°‡§§‡§æ‡§≥‡§£‡•Ä ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•ã‡§§
‚úì ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡§æ‡§Ç‡§ö‡•Ä ‡§Ö‡§ñ‡§Ç‡§°‡§§‡§æ ‡§§‡§™‡§æ‡§∏‡§§ ‡§Ü‡§π‡•ã‡§§
‚úì ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú‡§µ‡§∞ ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡•á ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•ã‡§§
‚úì ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ‡§∏‡§æ‡§†‡•Ä ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•ã‡§§

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ **‡§Ö‡§∞‡•ç‡§ú ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ù‡§æ‡§≤‡§æ**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéâ ‡§Ö‡§≠‡§ø‡§®‡§Ç‡§¶‡§®, {name}!

‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§®‡§®‡•ç‡§Ø ‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï:
üîë **{app_id}**

‚ö† **‡§Æ‡§π‡§§‡•ç‡§§‡•ç‡§µ‡§æ‡§ö‡•á:** ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§ø‡§Ç‡§ó‡§∏‡§æ‡§†‡•Ä ‡§π‡§æ ‡§Ü‡§Ø‡§°‡•Ä ‡§ú‡§§‡§® ‡§ï‡§∞‡§æ

**‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§≤‡§æ‡§≠:** ‚Çπ1,500
**‡§¶‡•á‡§Ø‡§ï ‡§™‡§¶‡•ç‡§ß‡§§:** ‡§•‡•á‡§ü ‡§¨‡§Å‡§ï ‡§π‡§∏‡•ç‡§§‡§æ‡§Ç‡§§‡§∞‡§£ (DBT)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üì± **‡§™‡•Å‡§¢‡•Ä‡§≤ ‡§™‡§æ‡§Ø‡§±‡•ç‡§Ø‡§æ:**

1. 24 ‡§§‡§æ‡§∏‡§æ‡§Ç‡§§ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ SMS/‡§à‡§Æ‡•á‡§≤ ‡§™‡•Å‡§∑‡•ç‡§ü‡•Ä‡§ï‡§∞‡§£ ‡§Æ‡§ø‡§≥‡•á‡§≤
2. 3-5 ‡§ï‡§æ‡§Æ‡§ï‡§æ‡§ú‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§¶‡§ø‡§µ‡§∏‡§æ‡§§ ‡§ï‡§æ‡§ó‡§¶‡§™‡§§‡•ç‡§∞‡§æ‡§Ç‡§ö‡•Ä ‡§™‡§°‡§§‡§æ‡§≥‡§£‡•Ä ‡§π‡•ã‡§à‡§≤
3. ‡§Æ‡§Ç‡§ú‡•Ç‡§∞ ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ‡§∏, 15 ‡§¶‡§ø‡§µ‡§∏‡§æ‡§Ç‡§§ ‡§™‡§π‡§ø‡§≤‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü
4. ‡§Ö‡§∞‡•ç‡§ú ‡§Ü‡§Ø‡§°‡•Ä ‡§µ‡§æ‡§™‡§∞‡•Ç‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï ‡§ï‡§∞‡§æ

SMS ‡§Ö‡§¶‡•ç‡§Ø‡§§‡§®‡•á +91 {mobile} ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§≤‡•Ä ‡§ú‡§æ‡§§‡•Ä‡§≤

‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! üôè

‡§¶‡•Å‡§∏‡§∞‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ.""",

    "invalid_date": """‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï/‡§Æ‡§π‡§ø‡§®‡§æ/‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™‡§æ‡§§ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ:""",

    "invalid_mobile": """‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞. ‡§ï‡•É‡§™‡§Ø‡§æ 6, 7, 8, ‡§ï‡§ø‡§Ç‡§µ‡§æ 9 ‡§®‡•á ‡§∏‡•Å‡§∞‡•Ç ‡§π‡•ã‡§£‡§æ‡§∞‡•á **10 ‡§Ö‡§Ç‡§ï** ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ:""",

    "invalid_option": """‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§™‡§∞‡•ç‡§Ø‡§æ‡§Ø ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ:""",

    "upload_prompt": """üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§ö‡•á **{doc}** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ:""",

    "restart_prompt": """‡§§‡•Å‡§Æ‡§ö‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ù‡§æ‡§≤‡§æ ‡§Ü‡§π‡•á!

üîë ‡§Ö‡§∞‡•ç‡§ú ‡§Ü‡§Ø‡§°‡•Ä: **{app_id}**

‡§¶‡•Å‡§∏‡§∞‡§æ ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ.""",

    "error": """‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Ç‡§ï ‡§ù‡§æ‡§≤‡•Ä. ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ."""
}


# ============================================
# MULTILINGUAL MESSAGES - HINDI
# ============================================

MESSAGES_HINDI = {
    "welcome": """üôè ‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§≤‡§æ‡§°‡§ï‡•Ä ‡§¨‡§π‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!

‚úÖ **‡§Ü‡§™ ‡§á‡§∏ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§æ‡§§‡•ç‡§∞ ‡§π‡•à‡§Ç!**

‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§ö‡§∞‡§£-‡§¶‡§∞-‡§ö‡§∞‡§£ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ‡•§""",

    "document_info": """üìã **‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Ü‡§™‡§ï‡•ã ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§π‡•ã‡§Ç‡§ó‡•á:**

1. ‚úÖ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§°
2. ‚úÖ ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ (‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï: ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ / ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° / ‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡§§‡•ç‡§∞ / ‡§ú‡§®‡•ç‡§Æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ / ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§õ‡•ã‡§°‡§º‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞)
3. ‚úÖ ‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ (‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø, ‡§Ø‡•á‡§≤‡•ã/‡§ë‡§∞‡•á‡§Ç‡§ú ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ö‡•Å‡§®‡§®‡•á ‡§™‡§∞ ‡§õ‡•ã‡§°‡§º‡§ï‡§∞)
4. ‚úÖ ‡§¨‡•à‡§Ç‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï
5. ‚úÖ ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞

üìù **‡§ö‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§**

‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ **‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞):""",

    "name_confirmed": """‚úÖ ‡§®‡§æ‡§Æ: **{name}**

üìÖ ‡§Ö‡§™‡§®‡•Ä **‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï/‡§Æ‡§π‡•Ä‡§®‡§æ/‡§µ‡§∞‡•ç‡§∑):""",

    "dob_confirmed": """‚úÖ ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø: **{dob}** (‡§Ü‡§Ø‡•Å: {age})

üíç ‡§Ü‡§™‡§ï‡•Ä **‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø** ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?

1. ‡§µ‡§ø‡§µ‡§æ‡§π‡§ø‡§§
2. ‡§Ö‡§µ‡§ø‡§µ‡§æ‡§π‡§ø‡§§
3. ‡§µ‡§ø‡§ß‡§µ‡§æ
4. ‡§§‡§≤‡§æ‡§ï‡§∂‡•Å‡§¶‡§æ

‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§Ç‡§¨‡§∞ (1-4) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç:""",

    "marital_confirmed": """‚úÖ ‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø: **{status}**

üì± ‡§Ö‡§™‡§®‡§æ **‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (10 ‡§Ö‡§Ç‡§ï):""",

    "mobile_confirmed": """‚úÖ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: **+91 {mobile}**

üìß ‡§Ö‡§™‡§®‡§æ **‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§Ø‡§æ ‡§õ‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è 'skip' ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç):""",

    "email_confirmed": """‚úÖ ‡§à‡§Æ‡•á‡§≤: **{email}**

üè† ‡§Ö‡§™‡§®‡§æ **‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:""",

    "address_saved": """‚úÖ ‡§™‡§§‡§æ ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÑ **‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ö‡§™‡§≤‡•ã‡§° ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ! ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•á ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§á‡§ï‡§ü‡•ç‡§†‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§

üîë ‡§Ü‡§™‡§ï‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: **{app_id}**

üìé **‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç** (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á "Aadhaar Card" ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "aadhaar_success": """‚úÖ **‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!**

**‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§Ü‡§ß‡§æ‡§∞: {aadhaar}
‚Ä¢ ‡§®‡§æ‡§Æ: {name}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•É‡§™‡§Ø‡§æ **‡§è‡§ï** ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§ö‡•Å‡§®‡•á‡§Ç:

1. ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞
2. ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§°
3. ‡§Æ‡§§‡§¶‡§æ‡§§‡§æ ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡§§‡•ç‡§∞
4. ‡§ú‡§®‡•ç‡§Æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞
5. ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§õ‡•ã‡§°‡§º‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞

‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (1-5):""",

    "domicile_selected": """‚úÖ ‡§ö‡§Ø‡§®‡§ø‡§§: **{doc_name}**

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ **{doc_name}** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á '{doc_name}' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "domicile_success": """‚úÖ **{doc_name} ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!**

**‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º: {doc_type}
‚Ä¢ ‡§®‡§æ‡§Æ: {name}
{extra_info}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ **‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á 'Income Certificate' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "ration_color": """‚úÖ **‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!**

**‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç‡§¨‡§∞: {card_number}
‚Ä¢ ‡§®‡§æ‡§Æ: {name}

üé® **‡§Ü‡§™‡§ï‡•á ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ ‡§∞‡§Ç‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?**

1. ‡§™‡•Ä‡§≤‡§æ
2. ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä
3. ‡§∏‡§´‡•á‡§¶

‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (1-3):""",

    "ration_white": """‚úÖ ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: **{color}**

‚ö†Ô∏è **‡§∏‡§´‡•á‡§¶ ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à**

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ **‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á 'Income Certificate' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "ration_yellow_orange": """‚úÖ ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: **{color}**

‚úì {color} ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à!
‚úì ‡§Ü‡§Ø ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡•á ‡§®‡§ø‡§ï‡§æ‡§≤‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä **‡§¨‡•à‡§Ç‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï (‡§™‡§π‡§≤‡§æ ‡§™‡•É‡§∑‡•ç‡§†)** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á 'Bank Passbook' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "income_success": """‚úÖ **‡§Ü‡§Ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!**

**‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§™‡§§‡•ç‡§∞ ‡§®‡§Ç.: {cert_no}
‚Ä¢ ‡§®‡§æ‡§Æ: {name}
‚Ä¢ ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§Ü‡§Ø: ‚Çπ{income}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä **‡§¨‡•à‡§Ç‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï (‡§™‡§π‡§≤‡§æ ‡§™‡•É‡§∑‡•ç‡§†)** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á 'Bank Passbook' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "bank_success": """‚úÖ **‡§¨‡•à‡§Ç‡§ï ‡§™‡§æ‡§∏‡§¨‡•Å‡§ï ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§à!**

**‡§®‡§ø‡§ï‡§æ‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ:**
‚Ä¢ ‡§ñ‡§æ‡§§‡§æ‡§ß‡§æ‡§∞‡§ï: {holder}
‚Ä¢ ‡§ñ‡§æ‡§§‡§æ ‡§®‡§Ç.: {account}
‚Ä¢ IFSC: {ifsc}
‚Ä¢ ‡§¨‡•à‡§Ç‡§ï: {bank}

üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä **‡§™‡§æ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§æ‡§á‡§ú‡§º ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (JPG/PNG)

üìé ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§°‡•ç‡§∞‡•â‡§™‡§°‡§æ‡§â‡§® ‡§∏‡•á 'Photograph' ‡§ö‡•Å‡§®‡•á‡§Ç‡•§""",

    "photo_success": """‚úÖ **‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§à!**

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **‡§Ü‡§µ‡•á‡§¶‡§® ‡§´‡•â‡§∞‡•ç‡§Æ - ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

**‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£:**
‚úì ‡§®‡§æ‡§Æ: {name}
‚úì ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø: {dob} (‡§Ü‡§Ø‡•Å: {age})
‚úì ‡§Ü‡§ß‡§æ‡§∞: {aadhaar}
‚úì ‡§µ‡•à‡§µ‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø: {marital}

**‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£:**
‚úì ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: +91 {mobile}
‚úì ‡§à‡§Æ‡•á‡§≤: {email}
‚úì ‡§™‡§§‡§æ: {address}

**‡§¨‡•à‡§Ç‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£:**
‚úì ‡§ñ‡§æ‡§§‡§æ ‡§®‡§Ç.: {account}
‚úì IFSC: {ifsc}
‚úì ‡§¨‡•à‡§Ç‡§ï: {bank}
‚úì ‡§Ü‡§ß‡§æ‡§∞-‡§¨‡•à‡§Ç‡§ï ‡§≤‡§ø‡§Ç‡§ï: ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‚úì

**‡§Ü‡§Ø ‡§µ‡§ø‡§µ‡§∞‡§£:**
‚úì ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§Ü‡§Ø: ‚Çπ{income}
‚úì ‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§°: {ration}

**‡§∏‡§Ç‡§≤‡§ó‡•ç‡§® ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ({count}):**
{doc_list}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§ï‡•ç‡§Ø‡§æ ‡§â‡§™‡§∞‡•ã‡§ï‡•ç‡§§ ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡•Ä ‡§π‡•à?

‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'YES'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§ï‡•á ‡§≤‡§ø‡§è **'NO'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç:""",

    "declaration": """‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìù **‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ñ‡§Ç‡§° - ‡§ò‡•ã‡§∑‡§£‡§æ**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‡§Æ‡•à‡§Ç ‡§è‡§§‡§¶‡•ç‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ò‡•ã‡§∑‡§£‡§æ ‡§ï‡§∞‡§§‡§æ/‡§ï‡§∞‡§§‡•Ä ‡§π‡•Ç‡§Ç ‡§ï‡§ø:

‚úì ‡§¶‡•Ä ‡§ó‡§à ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§§‡•ç‡§Ø ‡§î‡§∞ ‡§∏‡§π‡•Ä ‡§π‡•à
‚úì ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§Æ‡§ù ‡§π‡•à ‡§ï‡§ø ‡§ó‡§≤‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§®‡•á ‡§™‡§∞ ‡§≤‡§æ‡§≠ ‡§∞‡§¶‡•ç‡§¶ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à
‚úì ‡§Æ‡•à‡§Ç‡§®‡•á ‡§®‡§ø‡§Ø‡§Æ ‡§î‡§∞ ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç ‡§™‡§¢‡§º ‡§≤‡•Ä ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§∏‡§π‡§Æ‡§§ ‡§π‡•Ç‡§Ç

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìù ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡•á ‡§≤‡§ø‡§è **'I AGREE'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç:""",

    "declaration_accepted": """‚úì **‡§ò‡•ã‡§∑‡§£‡§æ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§à**

‡§Ö‡§™‡§®‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'SUBMIT'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç:""",

    "aadhaar_exists": """‚ùå **‡§Ü‡§µ‡•á‡§¶‡§® ‡§µ‡§ø‡§´‡§≤!**

‡§á‡§∏ ‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§µ‡•á‡§¶‡§® ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡•§

‡§Ø‡§¶‡§ø ‡§Ü‡§™‡§ï‡•ã ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ø‡§π ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•à, ‡§§‡•ã ‡§ï‡•É‡§™‡§Ø‡§æ ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§® ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§

‡§Ö‡§≤‡§ó ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§®‡§Ø‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§""",

    "success": """‚è≥ ‡§Ü‡§™‡§ï‡•á ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...

‚úì ‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à
‚úì ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§ï‡•Ä ‡§Ö‡§ñ‡§Ç‡§°‡§§‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à
‚úì ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§™‡§∞ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç
‚úì ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ **‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•Å‡§Ü**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéâ ‡§¨‡§ß‡§æ‡§à ‡§π‡•ã, {name}!

‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø ‡§Ü‡§µ‡•á‡§¶‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ:
üîë **{app_id}**

‚ö† **‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£:** ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π ‡§Ü‡§à‡§°‡•Ä ‡§∏‡§π‡•á‡§ú‡•á‡§Ç

**‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§≤‡§æ‡§≠:** ‚Çπ1,500
**‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§Æ‡•ã‡§°:** ‡§∏‡•Ä‡§ß‡•á ‡§¨‡•à‡§Ç‡§ï ‡§π‡§∏‡•ç‡§§‡§æ‡§Ç‡§§‡§∞‡§£ (DBT)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üì± **‡§Ö‡§ó‡§≤‡•á ‡§ï‡§¶‡§Æ:**

1. 24 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•ã SMS/‡§à‡§Æ‡•á‡§≤ ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø‡§ï‡§∞‡§£ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ
2. 3-5 ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§¶‡§ø‡§µ‡§∏‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä
3. ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§ø‡§§ ‡§π‡•ã‡§®‡•á ‡§™‡§∞, 15 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡§π‡§≤‡§æ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®
4. ‡§Ü‡§µ‡•á‡§¶‡§® ‡§Ü‡§à‡§°‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç

SMS ‡§Ö‡§™‡§°‡•á‡§ü +91 {mobile} ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á ‡§ú‡§æ‡§è‡§Ç‡§ó‡•á

‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! üôè

‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§""",

    "invalid_date": """‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï/‡§Æ‡§π‡•Ä‡§®‡§æ/‡§µ‡§∞‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§§‡§ø‡§•‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:""",

    "invalid_mobile": """‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ 6, 7, 8, ‡§Ø‡§æ 9 ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á **10 ‡§Ö‡§Ç‡§ï** ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:""",

    "invalid_option": """‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:""",

    "upload_prompt": """üìé ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ **{doc}** ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç:""",

    "restart_prompt": """‡§Ü‡§™‡§ï‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à!

üîë ‡§Ü‡§µ‡•á‡§¶‡§® ‡§Ü‡§à‡§°‡•Ä: **{app_id}**

‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§""",

    "error": """‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **'RESTART'** ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§"""
}


# ============================================
# MULTILINGUAL MESSAGES - ENGLISH
# ============================================

MESSAGES_ENGLISH = {
    "welcome": """üôè Welcome to Ladki Bahin Yojana!

‚úÖ **You are eligible for this scheme!**

I'll help you complete your application step by step.""",

    "document_info": """üìã **To move forward with registration, you'll need to upload the following documents:**

1. ‚úÖ Aadhaar Card
2. ‚úÖ Domicile Proof (any ONE of: Domicile Certificate / Ration Card / Voter ID / Birth Certificate / School LC)
3. ‚úÖ Income Certificate (compulsory, unless Yellow/Orange Ration Card selected as domicile proof)
4. ‚úÖ Bank Passbook
5. ‚úÖ Photograph

üìù **Let's start with your personal details.**

Please enter your **Full Name** (as per Aadhaar):""",

    "name_confirmed": """‚úÖ Name: **{name}**

üìÖ Enter your **Date of Birth** (DD/MM/YYYY):""",

    "dob_confirmed": """‚úÖ Date of Birth: **{dob}** (Age: {age})

üíç What is your **Marital Status**?

1. Married
2. Unmarried
3. Widow
4. Divorced

Please enter the number (1-4) or type your status:""",

    "marital_confirmed": """‚úÖ Marital Status: **{status}**

üì± Enter your **Mobile Number** (10 digits):""",

    "mobile_confirmed": """‚úÖ Mobile: **+91 {mobile}**

üìß Enter your **Email ID** (or type 'skip' to skip):""",

    "email_confirmed": """‚úÖ Email: **{email}**

üè† Enter your **Complete Address**:""",

    "address_saved": """‚úÖ Address saved!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÑ **DOCUMENT UPLOAD SECTION**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Great! Now let's collect your documents.

üîë Your Application ID: **{app_id}**

üìé **Please upload your Aadhaar Card** (PDF/JPG/PNG)

Use the üìé button and select "Aadhaar Card" from the dropdown.""",

    "aadhaar_success": """‚úÖ **Aadhaar Card uploaded successfully!**

**Extracted Data:**
‚Ä¢ Aadhaar: {aadhaar}
‚Ä¢ Name: {name}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **DOMICILE PROOF**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Please select **ONE** document to prove Maharashtra domicile:

1. Domicile Certificate
2. Ration Card
3. Voter ID
4. Birth Certificate
5. School Leaving Certificate

Enter the number (1-5):""",

    "domicile_selected": """‚úÖ Selected: **{doc_name}**

üìé Please upload your **{doc_name}** (PDF/JPG/PNG)

Use the üìé button and select '{doc_name}' from the dropdown.""",

    "domicile_success": """‚úÖ **{doc_name} uploaded successfully!**

**Extracted Data:**
‚Ä¢ Document: {doc_type}
‚Ä¢ Name: {name}
{extra_info}

üìé Please upload your **Income Certificate** (PDF/JPG/PNG)

Use the üìé button and select 'Income Certificate' from the dropdown.""",

    "ration_color": """‚úÖ **Ration Card uploaded successfully!**

**Extracted Data:**
‚Ä¢ Card Number: {card_number}
‚Ä¢ Name: {name}

üé® **What is the color of your Ration Card?**

1. Yellow
2. Orange
3. White

Enter the number (1-3):""",

    "ration_white": """‚úÖ Ration Card Type: **{color}**

‚ö†Ô∏è **White Ration Card requires Income Certificate**

üìé Please upload your **Income Certificate** (PDF/JPG/PNG)

Use the üìé button and select 'Income Certificate' from the dropdown.""",

    "ration_yellow_orange": """‚úÖ Ration Card Type: **{color}**

‚úì Income Certificate NOT required for {color} Ration Card!
‚úì Income will be extracted from Ration Card

üìé Please upload your **Bank Passbook (first page)** (PDF/JPG/PNG)

Use the üìé button and select 'Bank Passbook' from the dropdown.""",

    "income_success": """‚úÖ **Income Certificate uploaded successfully!**

**Extracted Data:**
‚Ä¢ Certificate No: {cert_no}
‚Ä¢ Name: {name}
‚Ä¢ Annual Income: ‚Çπ{income}

üìé Please upload your **Bank Passbook (first page)** (PDF/JPG/PNG)

Use the üìé button and select 'Bank Passbook' from the dropdown.""",

    "bank_success": """‚úÖ **Bank Passbook uploaded successfully!**

**Extracted Data:**
‚Ä¢ Account Holder: {holder}
‚Ä¢ Account No: {account}
‚Ä¢ IFSC: {ifsc}
‚Ä¢ Bank: {bank}

üìé Please upload your **Passport Size Photograph** (JPG/PNG)

Use the üìé button and select 'Photograph' from the dropdown.""",

    "photo_success": """‚úÖ **Photograph uploaded successfully!**

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìã **APPLICATION FORM - FINAL REVIEW**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

**Personal Details:**
‚úì Name: {name}
‚úì Date of Birth: {dob} (Age: {age})
‚úì Aadhaar: {aadhaar}
‚úì Marital Status: {marital}

**Contact Details:**
‚úì Mobile: +91 {mobile}
‚úì Email: {email}
‚úì Address: {address}

**Bank Details:**
‚úì Account: {account}
‚úì IFSC: {ifsc}
‚úì Bank: {bank}
‚úì Aadhaar-Bank Link: Verified ‚úì

**Income Details:**
‚úì Annual Income: ‚Çπ{income}
‚úì Ration Card: {ration}

**Documents Attached ({count}):**
{doc_list}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Is all the above information correct?

Type **'YES'** to proceed to declaration or **'NO'** to make changes:""",

    "declaration": """‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìù **FINAL SECTION - DECLARATION**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

I hereby declare that:

‚úì All information provided is true and correct
‚úì I understand providing false information may lead to cancellation of benefits
‚úì I have read and agree to the terms and conditions

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìù Type **'I AGREE'** to confirm:""",

    "declaration_accepted": """‚úì **Declaration accepted**

Type **'SUBMIT'** to submit your application:""",

    "aadhaar_exists": """‚ùå **Application Failed!**

An application with this Aadhaar number already exists in our system.

If you believe this is an error, please contact the helpline.

Type **'RESTART'** to start a new application with different details.""",

    "success": """‚è≥ Processing your application...

‚úì Validating all details
‚úì Checking document integrity
‚úì Uploading documents to secure storage
‚úì Registering for tracking system

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ **APPLICATION SUBMITTED SUCCESSFULLY**
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéâ Congratulations, {name}!

Your Unique Application ID:
üîë **{app_id}**

‚ö† **IMPORTANT:** Save this ID for tracking

**Monthly Benefit:** ‚Çπ1,500
**Payment Mode:** Direct Bank Transfer (DBT)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üì± **Next Steps:**

1. You will receive SMS/Email confirmation within 24 hours
2. Documents will be verified within 3-5 working days
3. If approved, first payment within 15 days
4. Track status using Application ID

SMS updates will be sent to +91 {mobile}

Thank You! üôè

Type **'RESTART'** to submit another application.""",

    "invalid_date": """‚ùå Invalid format. Please enter date in **DD/MM/YYYY** format:""",

    "invalid_mobile": """‚ùå Invalid mobile number. Please enter **10 digits** starting with 6, 7, 8, or 9:""",

    "invalid_option": """Please enter a valid option:""",

    "upload_prompt": """üìé Please upload your **{doc}**:""",

    "restart_prompt": """Your application has been submitted!

üîë Application ID: **{app_id}**

Type **'RESTART'** to submit another application.""",

    "error": """Something went wrong. Type **'RESTART'** to begin again."""
}


# ============================================
# HELPER FUNCTION FOR LANGUAGE SELECTION
# ============================================

def get_messages_for_language(lang: str):
    """Return the appropriate MESSAGES dictionary based on language"""
    if lang == "marathi":
        return MESSAGES_MARATHI
    elif lang == "hindi":
        return MESSAGES_HINDI
    else:
        return MESSAGES_ENGLISH


# ============================================
# AZURE BLOB STORAGE CONFIGURATION
# ============================================

AZURE_SA_NAME = os.getenv("AZURE_SA_NAME", "")
AZURE_SA_ACCESSKEY = os.getenv("AZURE_SA_ACCESSKEY", "")
AZURE_STORAGE_CONTAINER_NAME = "ladki-bahin-documents"

blob_service_client = None
container_client = None

def initialize_blob_storage():
    """Initialize Azure Blob Storage with private container"""
    global blob_service_client, container_client
    
    if not AZURE_SA_NAME or not AZURE_SA_ACCESSKEY:
        logger.error("‚ùå AZURE_SA_NAME or AZURE_SA_ACCESSKEY not found in .env")
        return False
    
    try:
        account_url = f"https://{AZURE_SA_NAME}.blob.core.windows.net"
        blob_service_client = BlobServiceClient(
            account_url=account_url,
            credential=AZURE_SA_ACCESSKEY
        )
        container_client = blob_service_client.get_container_client(AZURE_STORAGE_CONTAINER_NAME)
        
        try:
            container_client.create_container()
            logger.info(f"‚úÖ Created private blob container: {AZURE_STORAGE_CONTAINER_NAME}")
        except Exception:
            logger.info(f"‚úÖ Blob container already exists: {AZURE_STORAGE_CONTAINER_NAME}")
        
        return True
    except Exception as e:
        logger.error(f"‚ùå Failed to initialize blob storage: {e}")
        return False


def upload_to_blob(file_content: bytes, application_id: str, document_type: str, file_extension: str) -> str:
    """Upload document to Azure Blob Storage (PRIVATE) and return SAS URL"""
    try:
        if not container_client:
            logger.error("‚ùå Blob storage not initialized")
            raise Exception("Blob storage not initialized")
        
        blob_name = f"{application_id}/{document_type}{file_extension}"
        logger.info(f"üì§ Uploading: {blob_name}")
        
        blob_client = container_client.get_blob_client(blob_name)
        
        content_settings = ContentSettings(
            content_type='application/pdf' if file_extension == '.pdf' else f'image/{file_extension[1:]}'
        )
        
        blob_client.upload_blob(file_content, overwrite=True, content_settings=content_settings)
        
        sas_token = generate_blob_sas(
            account_name=AZURE_SA_NAME,
            container_name=AZURE_STORAGE_CONTAINER_NAME,
            blob_name=blob_name,
            account_key=AZURE_SA_ACCESSKEY,
            permission=BlobSasPermissions(read=True),
            expiry=datetime.utcnow() + timedelta(hours=10000)
        )
        
        blob_url = f"https://{AZURE_SA_NAME}.blob.core.windows.net/{AZURE_STORAGE_CONTAINER_NAME}/{blob_name}?{sas_token}"
        
        logger.info(f"‚úÖ Document uploaded: {blob_name}")
        logger.info(f"üîó SAS URL generated (length: {len(blob_url)} chars)")
        
        return blob_url
    
    except Exception as e:
        logger.error(f"‚ùå Blob upload failed: {e}")
        raise


def download_from_blob(blob_url: str) -> bytes:
    """Download document from Azure Blob Storage for OCR processing"""
    try:
        blob_name = blob_url.split(f"{AZURE_STORAGE_CONTAINER_NAME}/")[1].split("?")[0]
        blob_client = container_client.get_blob_client(blob_name)
        blob_data = blob_client.download_blob()
        return blob_data.readall()
    except Exception as e:
        logger.error(f"‚ùå Blob download failed: {e}")
        return b""


# ============================================
# CROSS-PLATFORM TESSERACT SETUP
# ============================================

def setup_tesseract():
    """Configure Tesseract OCR for both Windows and Linux"""
    try:
        if os.name == "nt":
            tesseract_path = r"C:\Program Files\Tesseract-OCR\tesseract.exe"
            if os.path.exists(tesseract_path):
                pytesseract.pytesseract.tesseract_cmd = tesseract_path
                logger.info(f"‚úÖ Windows: Tesseract found at {tesseract_path}")
            else:
                logger.warning("‚ö†Ô∏è Windows: Tesseract not found at default path.")
        else:
            result = shutil.which("tesseract")
            if result:
                pytesseract.pytesseract.tesseract_cmd = result
                logger.info(f"‚úÖ Linux: Tesseract found at {result}")
            else:
                logger.warning("‚ö†Ô∏è Linux: Tesseract not found. Attempting to install...")
                try:
                    subprocess.run(["apt-get", "update"], check=False, stdout=subprocess.DEVNULL)
                    subprocess.run(["apt-get", "install", "-y", "tesseract-ocr", "tesseract-ocr-eng", "tesseract-ocr-hin"], 
                                 check=True, stdout=subprocess.DEVNULL)
                    result = shutil.which("tesseract")
                    if result:
                        pytesseract.pytesseract.tesseract_cmd = result
                        logger.info(f"‚úÖ Successfully installed Tesseract at {result}")
                except Exception as e:
                    logger.error(f"‚ùå Failed to install Tesseract: {e}")
    except Exception as e:
        logger.error(f"‚ùå Error configuring Tesseract: {e}")

setup_tesseract()


# ============================================
# FASTAPI APP SETUP
# ============================================

app = FastAPI(title="Ladki Bahin Yojana API")

@app.on_event("startup")
async def startup_event():
    try:
        logger.info("üöÄ Starting application initialization...")
        
        if not initialize_blob_storage():
            logger.warning("‚ö†Ô∏è Blob storage initialization failed. Document uploads will not work.")
        
        logger.info("‚úÖ Application startup complete!")
        
    except Exception as e:
        logger.error(f"‚ùå FATAL ERROR during startup: {e}")
        import traceback
        logger.error(f"‚ùå Traceback: {traceback.format_exc()}")
        raise

# Azure OpenAI Configuration
AZURE_OPENAI_ENDPOINT = os.getenv("AZURE_OPENAI_ENDPOINT", "")
AZURE_OPENAI_KEY = os.getenv("AZURE_OPENAI_API_KEY", "")
AZURE_OPENAI_DEPLOYMENT = os.getenv("AZURE_OPENAI_DEPLOYMENT_NAME", "gpt-4o-mini")
AZURE_OPENAI_API_VERSION = os.getenv("AZURE_OPENAI_API_VERSION", "2024-12-01-preview")

openai_client = None
if AZURE_OPENAI_ENDPOINT and AZURE_OPENAI_KEY:
    openai_client = AzureOpenAI(
        azure_endpoint=AZURE_OPENAI_ENDPOINT,
        api_key=AZURE_OPENAI_KEY,
        api_version=AZURE_OPENAI_API_VERSION
    )
    logger.info("‚úÖ Azure OpenAI client initialized")

sessions = {}


# ============================================
# DOCUMENT CONFIGURATION
# ============================================

DOCUMENT_TYPES = {
    "aadhaar": "Aadhaar Card",
    "domicile_certificate": "Domicile Certificate",
    "ration_card": "Ration Card",
    "voter_id": "Voter ID",
    "birth_certificate": "Birth Certificate",
    "school_leaving": "School Leaving Certificate",
    "income_certificate": "Income Certificate",
    "bank_passbook": "Bank Passbook",
    "photograph": "Photograph",
}

DOMICILE_PROOF_OPTIONS = ["domicile_certificate", "ration_card", "voter_id", "birth_certificate", "school_leaving"]


# ============================================
# CUSTOM DOCUMENT INTELLIGENCE
# ============================================

class DocumentIntelligence:
    """Custom OCR + AI parsing system with document validation"""
    
    def __init__(self):
        self.tesseract_config = r'--oem 3 --psm 6'
        self.tesseract_lang = 'eng+hin'
        
        self.validation_keywords = {
            "aadhaar": [
                "aadhaar", "‡§Ü‡§ß‡§æ‡§∞", "aadhar", "unique identification", 
                "uidai", "government of india", "‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞"
            ],
            "bank_passbook": [
                "bank", "‡§¨‡•à‡§Ç‡§ï", "‡§¨‡§Å‡§ï", "account", "passbook", "savings", "current",
                "ifsc", "branch", "balance"
            ],
            "income_certificate": [
                "income", "‡§Ü‡§Ø", "‡§â‡§§‡•ç‡§™‡§®‡•ç‡§®", "certificate", "‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞", "annual income",
                "‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§Ü‡§Ø", "tehsildar", "‡§§‡§π‡§∏‡•Ä‡§≤‡§¶‡§æ‡§∞"
            ],
            "ration_card": [
                "ration", "‡§∞‡§æ‡§∂‡§®", "‡§∂‡§ø‡§ß‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ", "‡§™‡•Å‡§∞‡§µ‡§†‡§æ‡§™‡§§‡•ç‡§∞‡§ø‡§ï‡§æ", "food",
                "‡§Ö‡§®‡•ç‡§®", "civil supplies", "‡§®‡§æ‡§ó‡§∞‡•Ä ‡§™‡•Å‡§∞‡§µ‡§†‡§æ"
            ],
            "voter_id": [
                "election", "‡§®‡§ø‡§∞‡•ç‡§µ‡§æ‡§ö‡§®", "voter", "‡§Æ‡§§‡§¶‡§æ‡§§‡§æ", "epic",
                "election commission of india", "‡§≠‡§æ‡§∞‡§§ ‡§®‡§ø‡§∞‡•ç‡§µ‡§æ‡§ö‡§® ‡§Ü‡§Ø‡•ã‡§ó"
            ],
            "domicile_certificate": [
                "domicile", "‡§Ö‡§ß‡§ø‡§µ‡§æ‡§∏", "‡§®‡§ø‡§µ‡§æ‡§∏", "residence", "certificate",
                "‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞", "maharashtra", "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞"
            ],
            "birth_certificate": [
                "birth", "‡§ú‡§®‡•ç‡§Æ", "certificate", "‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞", "registration",
                "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£", "‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä"
            ],
            "school_leaving": [
                "school", "‡§∂‡§æ‡§≥‡§æ", "‡§∏‡•ç‡§ï‡•Ç‡§≤", "leaving", "certificate", "‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞",
                "education", "‡§∂‡§ø‡§ï‡•ç‡§∑‡§£", "student"
            ],
            "photograph": []
        }
    
    def extract_text_from_bytes(self, file_content: bytes, file_extension: str) -> str:
        """Extract raw text from file bytes using Tesseract OCR"""
        try:
            if file_extension.lower() == '.pdf':
                import tempfile
                with tempfile.NamedTemporaryFile(delete=False, suffix='.pdf') as tmp:
                    tmp.write(file_content)
                    tmp_path = tmp.name
                
                images = convert_from_path(tmp_path, dpi=300)
                text = ""
                for img in images:
                    text += pytesseract.image_to_string(img, lang=self.tesseract_lang, config=self.tesseract_config)
                
                os.unlink(tmp_path)
                return text
            else:
                img = Image.open(io.BytesIO(file_content))
                return pytesseract.image_to_string(img, lang=self.tesseract_lang, config=self.tesseract_config)
        except Exception as e:
            logger.error(f"OCR Error: {e}")
            return f"OCR Error: {str(e)}"
    
    def validate_document_type(self, raw_text: str, document_type: str) -> tuple:
        """Validate if the uploaded document matches the expected document type"""
        if document_type == "photograph":
            return True, None
        
        keywords = self.validation_keywords.get(document_type, [])
        if not keywords:
            return True, None
        
        text_lower = raw_text.lower()
        
        for keyword in keywords:
            if keyword.lower() in text_lower:
                return True, None
        
        error_messages = {
            "aadhaar": "‚ùå **Invalid Document!** Please upload a valid Aadhaar Card.",
            "bank_passbook": "‚ùå **Invalid Document!** Please upload a valid Bank Passbook.",
            "income_certificate": "‚ùå **Invalid Document!** Please upload a valid Income Certificate.",
            "ration_card": "‚ùå **Invalid Document!** Please upload a valid Ration Card.",
            "voter_id": "‚ùå **Invalid Document!** Please upload a valid Voter ID Card.",
            "domicile_certificate": "‚ùå **Invalid Document!** Please upload a valid Domicile Certificate.",
            "birth_certificate": "‚ùå **Invalid Document!** Please upload a valid Birth Certificate.",
            "school_leaving": "‚ùå **Invalid Document!** Please upload a valid School Leaving Certificate."
        }
        
        return False, error_messages.get(document_type, "‚ùå Invalid Document!")
    
    def validate_name(self, extracted_name: str, expected_name: str) -> tuple:
        """Validate if the name extracted from document matches the expected name"""
        if not extracted_name or not expected_name:
            return True, None
        
        def normalize_name(name):
            return ' '.join(name.lower().strip().split())
        
        extracted_normalized = normalize_name(extracted_name)
        expected_normalized = normalize_name(expected_name)
        
        extracted_words = set(extracted_normalized.split())
        expected_words = set(expected_normalized.split())
        
        if extracted_words == expected_words:
            return True, None
        
        common_words = extracted_words.intersection(expected_words)
        if len(common_words) >= max(1, len(expected_words) * 0.7):
            return True, None
        
        return False, f"‚ùå **Name Mismatch!** The name on the document ('{extracted_name}') does not match the name you provided ('{expected_name}')."
    
    def parse_with_ai(self, text: str, document_type: str) -> Dict[str, Any]:
        """Use AI to intelligently extract fields from OCR text"""
        
        if not openai_client:
            logger.warning("‚ö†Ô∏è Azure OpenAI not configured. Using basic extraction.")
            return self.basic_extract(text, document_type)
        
        prompts = {
            "aadhaar": f"""Extract from Aadhaar card:
- aadhaar_number (12 digits, remove spaces)
- name (full name)
- dob (DD/MM/YYYY)
- gender (M/F)
- address (complete address)

OCR Text:
{text}

Return JSON only with these exact keys.""",
            
            "bank_passbook": f"""Extract from bank passbook:
- account_number
- ifsc_code (11 chars: 4 letters + 0 + 6 alphanumeric)
- bank_name
- account_holder_name (name of account holder)
- branch

OCR Text:
{text}

Return JSON only.""",
            
            "income_certificate": f"""Extract from income certificate:
- annual_income (number only, in rupees)
- certificate_number
- issuing_authority
- issue_date (DD/MM/YYYY)
- holder_name (name of person)

OCR Text:
{text}

Return JSON only.""",
            
            "domicile_certificate": f"""Extract from domicile certificate:
- certificate_number
- holder_name (name of person)
- state
- district
- taluka
- village
- issue_date (DD/MM/YYYY)

OCR Text:
{text}

Return JSON only.""",
            
            "ration_card": f"""Extract from ration card:
- card_number
- card_type (Yellow/Orange/White - determine from color mentioned or category)
- holder_name (head of family name)
- family_members (count)
- issue_date
- annual_income (if mentioned, number only)

OCR Text:
{text}

Return JSON only.""",

            "voter_id": f"""Extract from Voter ID Card:
- voter_id_number (EPIC number - format like ABC1234567)
- holder_name (elector name)
- father_name
- address
- date_of_birth

OCR Text:
{text}

Return JSON only.""",

            "birth_certificate": f"""Extract from birth certificate:
- certificate_number
- name (child name)
- date_of_birth (DD/MM/YYYY)
- place_of_birth
- father_name
- mother_name

OCR Text:
{text}

Return JSON only.""",

            "school_leaving": f"""Extract from school leaving certificate:
- certificate_number
- student_name (name of student)
- date_of_birth
- school_name
- district
- issue_date

OCR Text:
{text}

Return JSON only."""
        }
        
        prompt = prompts.get(document_type, f"Extract key information from:\n{text}\n\nReturn JSON.")
        
        try:
            response = openai_client.chat.completions.create(
                model=AZURE_OPENAI_DEPLOYMENT,
                messages=[
                    {"role": "system", "content": "Extract structured data from OCR text. Return ONLY valid JSON with no markdown formatting."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0,
                max_tokens=1000
            )
            
            result_text = response.choices[0].message.content.strip()
            result_text = result_text.replace('```json', '').replace('```', '').strip()
            return json.loads(result_text)
            
        except Exception as e:
            logger.error(f"AI parsing error: {e}")
            return self.basic_extract(text, document_type)
    
    def basic_extract(self, text: str, document_type: str) -> Dict[str, Any]:
        """Basic regex extraction as fallback"""
        result = {}
        
        if document_type == "aadhaar":
            aadhaar_match = re.search(r'\b\d{4}\s?\d{4}\s?\d{4}\b', text)
            if aadhaar_match:
                result['aadhaar_number'] = aadhaar_match.group(0).replace(' ', '')
        
        elif document_type == "bank_passbook":
            ifsc_match = re.search(r'\b[A-Z]{4}0[A-Z0-9]{6}\b', text)
            if ifsc_match:
                result['ifsc_code'] = ifsc_match.group(0)
            
            account_matches = re.findall(r'\b\d{9,18}\b', text)
            if account_matches:
                result['account_number'] = account_matches[0]
        
        elif document_type == "ration_card":
            card_match = re.search(r'\b(MH\d{10,}|\d{10,})\b', text)
            if card_match:
                result['card_number'] = card_match.group(0)
        
        elif document_type == "voter_id":
            voter_match = re.search(r'\b[A-Z]{3}\d{7}\b', text)
            if voter_match:
                result['voter_id_number'] = voter_match.group(0)
        
        return result
    
    def get_name_field(self, fields: Dict, document_type: str) -> str:
        """Get the name field from extracted data based on document type"""
        name_keys = {
            "aadhaar": "name",
            "bank_passbook": "account_holder_name",
            "income_certificate": "holder_name",
            "domicile_certificate": "holder_name",
            "ration_card": "holder_name",
            "voter_id": "holder_name",
            "birth_certificate": "name",
            "school_leaving": "student_name"
        }
        key = name_keys.get(document_type, "name")
        return fields.get(key, "") or fields.get("name", "")
    
    def analyze_document(self, file_content: bytes, file_extension: str, document_type: str, 
                        blob_url: str, expected_name: str = None) -> Dict[str, Any]:
        """Complete document analysis with validation"""
        raw_text = self.extract_text_from_bytes(file_content, file_extension)
        
        is_valid_type, type_error = self.validate_document_type(raw_text, document_type)
        if not is_valid_type:
            return {
                "document_type": document_type,
                "raw_text": raw_text[:500],
                "fields": {},
                "is_valid": False,
                "validation_error": type_error,
                "blob_url": blob_url
            }
        
        structured_data = self.parse_with_ai(raw_text, document_type)
        
        if expected_name and document_type != "photograph":
            extracted_name = self.get_name_field(structured_data, document_type)
            is_valid_name, name_error = self.validate_name(extracted_name, expected_name)
            if not is_valid_name:
                return {
                    "document_type": document_type,
                    "raw_text": raw_text[:500],
                    "fields": structured_data,
                    "is_valid": False,
                    "validation_error": name_error,
                    "blob_url": blob_url
                }
        
        return {
            "document_type": document_type,
            "raw_text": raw_text[:500],
            "fields": structured_data,
            "is_valid": True,
            "validation_error": None,
            "blob_url": blob_url
        }


doc_intelligence = DocumentIntelligence()


# ============================================
# HELPER FUNCTIONS
# ============================================

def parse_date(date_str: str) -> Optional[datetime]:
    """Parse date from DD/MM/YYYY format"""
    try:
        return datetime.strptime(date_str, "%d/%m/%Y")
    except:
        return None

def calculate_age(dob_str: str) -> int:
    """Calculate age from date of birth string"""
    try:
        dob = datetime.strptime(dob_str, "%d/%m/%Y")
        today = datetime.now()
        age = today.year - dob.year - ((today.month, today.day) < (dob.month, dob.day))
        return age
    except:
        return 0

def mask_aadhaar(aadhaar: str) -> str:
    """Mask Aadhaar number for display"""
    if aadhaar and len(aadhaar) >= 4:
        return f"XXXX-XXXX-{aadhaar[-4:]}"
    return "Not provided"

def mask_account(account: str) -> str:
    """Mask account number for display"""
    if account and len(account) >= 4:
        return f"XXXX-XXXX-{account[-4:]}"
    return "Not provided"


# ============================================
# CHATBOT LOGIC
# ============================================

def get_bot_response(session_id: str, user_message: str = "", file_uploaded: dict = None):
    """Main chatbot conversation logic with language selection"""
    
    session = sessions.get(session_id)
    if not session:
        session = {
            "step": "welcome",
            "documents": {},
            "extracted_data": {},
            "personal_info": {},
            "contact_info": {},
            "bank_info": {},
            "income_info": {},
            "domicile_info": {},
            "uploaded_docs": [],
            "conversation": [],
            "ration_card_color": None,
            "domicile_proof_type": None,
            "beneficiary_id": None,
            "application_id": None
        }
        sessions[session_id] = session
    
    if user_message:
        session["conversation"].append({"role": "user", "message": user_message})
    
    # Handle RESTART command
    if user_message.upper() == "RESTART":
        sessions[session_id] = {
            "step": "welcome",
            "documents": {},
            "extracted_data": {},
            "personal_info": {},
            "contact_info": {},
            "bank_info": {},
            "income_info": {},
            "domicile_info": {},
            "uploaded_docs": [],
            "conversation": [],
            "ration_card_color": None,
            "domicile_proof_type": None,
            "beneficiary_id": None,
            "application_id": None
        }
        session = sessions[session_id]
    
    # Get language-specific messages
    if "language" in session:
        MESSAGES = get_messages_for_language(session["language"])
    else:
        MESSAGES = MESSAGES_ENGLISH  # Default for welcome/language selection
    
    current_step = session["step"]
    response = {}
    
    # STEP 1: WELCOME (All 3 languages)
    if current_step == "welcome":
        session["step"] = "select_language"
        response = {
            "message": """üôè ‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§≤‡§æ‡§°‡§ï‡•Ä ‡§¨‡§π‡•Ä‡§£ ‡§Ø‡•ã‡§ú‡§®‡•á‡§§ ‡§Ü‡§™‡§≤‡•á ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á!
üôè ‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§≤‡§æ‡§°‡§ï‡•Ä ‡§¨‡§π‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!
üôè Welcome to Ladki Bahin Yojana!

‚úÖ ‡§Ü‡§™‡§£ ‡§Ø‡§æ ‡§Ø‡•ã‡§ú‡§®‡•á‡§∏‡§æ‡§†‡•Ä ‡§™‡§æ‡§§‡•ç‡§∞ ‡§Ü‡§π‡§æ‡§§!
‚úÖ ‡§Ü‡§™ ‡§á‡§∏ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§æ‡§§‡•ç‡§∞ ‡§π‡•à‡§Ç!
‚úÖ You are eligible for this scheme!""",
            "type": "success",
            "waiting_for": "none"
        }
    
    # STEP 2: SELECT LANGUAGE
    elif current_step == "select_language":
        if not user_message:
            response = {
                "message": """‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§™‡§≤‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§®‡§ø‡§µ‡§°‡§æ / ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç / Please select your language:

1. ‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)
2. ‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)
3. English

‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ / ‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç / Please enter the number (1-3):""",
                "type": "info",
                "waiting_for": "language_input"
            }
        else:
            lang_map = {
                "1": "marathi",
                "2": "hindi",
                "3": "english"
            }
            
            selected_lang = lang_map.get(user_message)
            
            if selected_lang:
                session["language"] = selected_lang
                session["step"] = "eligible_message"
                
                MESSAGES = get_messages_for_language(selected_lang)
                
                response = {
                    "message": MESSAGES["document_info"],
                    "type": "info",
                    "waiting_for": "name_input"
                }
            else:
                response = {
                    "message": """‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§™‡§∞‡•ç‡§Ø‡§æ‡§Ø / ‡§Ö‡§µ‡•à‡§ß ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ / Invalid option

‡§ï‡•É‡§™‡§Ø‡§æ 1, 2, ‡§ï‡§ø‡§Ç‡§µ‡§æ 3 ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ / ‡§ï‡•É‡§™‡§Ø‡§æ 1, 2, ‡§Ø‡§æ 3 ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç / Please enter 1, 2, or 3:""",
                    "type": "error",
                    "waiting_for": "language_input"
                }
    
    # STEP 3: COLLECT NAME
    elif current_step == "eligible_message" or current_step == "collect_name":
        if user_message:
            session["personal_info"]["name"] = user_message
            session["step"] = "collect_dob"
            response = {
                "message": MESSAGES["name_confirmed"].format(name=user_message),
                "type": "success",
                "waiting_for": "dob_input"
            }
        else:
            response = {
                "message": MESSAGES["document_info"],
                "type": "text",
                "waiting_for": "name_input"
            }
    
    # STEP 4: COLLECT DOB
    elif current_step == "collect_dob":
        if re.match(r'^\d{2}/\d{2}/\d{4}$', user_message):
            age = calculate_age(user_message)
            session["personal_info"]["dob"] = user_message
            session["personal_info"]["age"] = age
            session["step"] = "collect_marital_status"
            response = {
                "message": MESSAGES["dob_confirmed"].format(dob=user_message, age=age),
                "type": "success",
                "waiting_for": "marital_status"
            }
        else:
            response = {
                "message": MESSAGES["invalid_date"],
                "type": "error",
                "waiting_for": "dob_input"
            }
    
    # STEP 5: COLLECT MARITAL STATUS
    elif current_step == "collect_marital_status":
        status_map = {"1": "Married", "2": "Unmarried", "3": "Widow", "4": "Divorced"}
        status = status_map.get(user_message, user_message)
        session["personal_info"]["marital_status"] = status
        session["step"] = "collect_mobile"
        response = {
            "message": MESSAGES["marital_confirmed"].format(status=status),
            "type": "success",
            "waiting_for": "mobile_input"
        }
    
    # STEP 6: COLLECT MOBILE
    elif current_step == "collect_mobile":
        if re.match(r'^[6-9]\d{9}$', user_message):
            session["contact_info"]["mobile"] = user_message
            session["step"] = "collect_email"
            response = {
                "message": MESSAGES["mobile_confirmed"].format(mobile=user_message),
                "type": "success",
                "waiting_for": "email_input"
            }
        else:
            response = {
                "message": MESSAGES["invalid_mobile"],
                "type": "error",
                "waiting_for": "mobile_input"
            }
    
    # STEP 7: COLLECT EMAIL
    elif current_step == "collect_email":
        if user_message.lower() == "skip":
            session["contact_info"]["email"] = ""
        else:
            session["contact_info"]["email"] = user_message
        session["step"] = "collect_address"
        email_display = session["contact_info"]["email"] or "Skipped"
        response = {
            "message": MESSAGES["email_confirmed"].format(email=email_display),
            "type": "success",
            "waiting_for": "address_input"
        }
    
    # STEP 8: COLLECT ADDRESS
    elif current_step == "collect_address":
        session["contact_info"]["address"] = user_message
        
        application_id = db_manager.generate_application_id() if db_manager else f"{datetime.now().strftime('%Y%m%d%H%M%S')}"
        session["application_id"] = application_id
        
        session["step"] = "upload_aadhaar"
        response = {
            "message": MESSAGES["address_saved"].format(app_id=application_id),
            "type": "info",
            "waiting_for": "aadhaar_upload"
        }
    
    # STEP 9: UPLOAD AADHAAR
    elif current_step == "upload_aadhaar":
        if file_uploaded and file_uploaded.get("doc_type") == "aadhaar":
            expected_name = session["personal_info"].get("name", "")
            application_id = session.get("application_id")
            
            blob_url = upload_to_blob(
                file_uploaded["content"],
                application_id,
                "aadhaar",
                file_uploaded["extension"]
            )
            
            if not blob_url:
                response = {
                    "message": "‚ùå Upload failed. Please try again.",
                    "type": "error",
                    "waiting_for": "aadhaar_upload"
                }
            else:
                result = doc_intelligence.analyze_document(
                    file_uploaded["content"],
                    file_uploaded["extension"],
                    "aadhaar",
                    blob_url,
                    expected_name
                )
                
                if not result.get("is_valid"):
                    response = {
                        "message": result.get("validation_error", "‚ùå Invalid document"),
                        "type": "error",
                        "waiting_for": "aadhaar_upload"
                    }
                else:
                    session["documents"]["aadhaar"] = result
                    session["uploaded_docs"].append("aadhaar")
                    
                    fields = result.get("fields", {})
                    session["extracted_data"]["aadhaar_number"] = fields.get("aadhaar_number", "")
                    session["extracted_data"]["name_from_aadhaar"] = fields.get("name", "")
                    
                    session["step"] = "select_domicile_proof"
                    
                    aadhaar_display = mask_aadhaar(fields.get("aadhaar_number", ""))
                    
                    response = {
                        "message": MESSAGES["aadhaar_success"].format(
                            aadhaar=aadhaar_display,
                            name=fields.get("name", "Extracted")
                        ),
                        "type": "success",
                        "waiting_for": "domicile_selection"
                    }
        else:
            response = {
                "message": MESSAGES["upload_prompt"].format(doc="Aadhaar Card"),
                "type": "text",
                "waiting_for": "aadhaar_upload"
            }
    
    # STEP 10: SELECT DOMICILE PROOF
    elif current_step == "select_domicile_proof":
        proof_map = {
            "1": ("domicile_certificate", "Domicile Certificate"),
            "2": ("ration_card", "Ration Card"),
            "3": ("voter_id", "Voter ID"),
            "4": ("birth_certificate", "Birth Certificate"),
            "5": ("school_leaving", "School Leaving Certificate")
        }
        
        if user_message in proof_map:
            doc_type, doc_name = proof_map[user_message]
            session["domicile_proof_type"] = doc_type
            session["step"] = "upload_domicile_proof"
            response = {
                "message": MESSAGES["domicile_selected"].format(doc_name=doc_name),
                "type": "info",
                "waiting_for": f"{doc_type}_upload"
            }
        else:
            response = {
                "message": MESSAGES["invalid_option"],
                "type": "error",
                "waiting_for": "domicile_selection"
            }
    
    # STEP 11: UPLOAD DOMICILE PROOF
    elif current_step == "upload_domicile_proof":
        domicile_type = session.get("domicile_proof_type")
        
        if file_uploaded:
            doc_type = file_uploaded.get("doc_type")
            expected_name = session["personal_info"].get("name", "")
            application_id = session.get("application_id")
            
            blob_url = upload_to_blob(
                file_uploaded["content"],
                application_id,
                doc_type,
                file_uploaded["extension"]
            )
            
            if not blob_url:
                response = {
                    "message": "‚ùå Upload failed",
                    "type": "error",
                    "waiting_for": f"{domicile_type}_upload"
                }
            else:
                result = doc_intelligence.analyze_document(
                    file_uploaded["content"],
                    file_uploaded["extension"],
                    doc_type,
                    blob_url,
                    expected_name
                )
                
                if not result.get("is_valid"):
                    response = {
                        "message": result.get("validation_error", "‚ùå Invalid document"),
                        "type": "error",
                        "waiting_for": f"{domicile_type}_upload"
                    }
                else:
                    session["documents"][doc_type] = result
                    session["uploaded_docs"].append(doc_type)
                    
                    fields = result.get("fields", {})
                    
                    session["domicile_info"] = {
                        "type": doc_type,
                        "certificate_number": fields.get("certificate_number") or fields.get("card_number") or fields.get("voter_id_number"),
                        "district": fields.get("district", ""),
                        "taluka": fields.get("taluka", ""),
                        "village": fields.get("village", "")
                    }
                    
                    if doc_type == "ration_card":
                        session["step"] = "ask_ration_color"
                        response = {
                            "message": MESSAGES["ration_color"].format(
                                card_number=fields.get("card_number", "Extracted"),
                                name=fields.get("holder_name", "Extracted")
                            ),
                            "type": "success",
                            "waiting_for": "ration_color"
                        }
                    else:
                        session["step"] = "upload_income_certificate"
                        extra_info = ""
                        if doc_type == "voter_id" and fields.get("voter_id_number"):
                            extra_info = f"‚Ä¢ Voter ID: {fields.get('voter_id_number')}\n"
                        if fields.get("district"):
                            extra_info += f"‚Ä¢ District: {fields.get('district')}"
                        
                        response = {
                            "message": MESSAGES["domicile_success"].format(
                                doc_name=DOCUMENT_TYPES.get(doc_type),
                                doc_type=DOCUMENT_TYPES.get(doc_type),
                                name=doc_intelligence.get_name_field(fields, doc_type) or "Extracted",
                                extra_info=extra_info
                            ),
                            "type": "success",
                            "waiting_for": "income_certificate_upload"
                        }
        else:
            doc_name = DOCUMENT_TYPES.get(domicile_type, "Document")
            response = {
                "message": MESSAGES["upload_prompt"].format(doc=doc_name),
                "type": "text",
                "waiting_for": f"{domicile_type}_upload"
            }
    
    # STEP 12: ASK RATION COLOR
    elif current_step == "ask_ration_color":
        color_map = {"1": "Yellow", "2": "Orange", "3": "White"}
        color = color_map.get(user_message, user_message.capitalize())
        
        if color in ["Yellow", "Orange", "White"]:
            session["ration_card_color"] = color
            session["income_info"]["ration_card_type"] = color
            
            ration_fields = session["documents"].get("ration_card", {}).get("fields", {})
            
            if color == "White":
                session["step"] = "upload_income_certificate"
                response = {
                    "message": MESSAGES["ration_white"].format(color=color),
                    "type": "info",
                    "waiting_for": "income_certificate_upload"
                }
            else:
                extracted_income = ration_fields.get("annual_income", "")
                session["income_info"]["annual_income"] = extracted_income or "As per Ration Card"
                session["income_info"]["source"] = "ration_card"
                
                session["step"] = "upload_bank_passbook"
                response = {
                    "message": MESSAGES["ration_yellow_orange"].format(color=color),
                    "type": "success",
                    "waiting_for": "bank_passbook_upload"
                }
        else:
            response = {
                "message": MESSAGES["invalid_option"],
                "type": "error",
                "waiting_for": "ration_color"
            }
    
    # STEP 13: UPLOAD INCOME CERTIFICATE
    elif current_step == "upload_income_certificate":
        if file_uploaded and file_uploaded.get("doc_type") == "income_certificate":
            expected_name = session["personal_info"].get("name", "")
            application_id = session.get("application_id")
            
            blob_url = upload_to_blob(
                file_uploaded["content"],
                application_id,
                "income_certificate",
                file_uploaded["extension"]
            )
            
            if not blob_url:
                response = {
                    "message": "‚ùå Upload failed",
                    "type": "error",
                    "waiting_for": "income_certificate_upload"
                }
            else:
                result = doc_intelligence.analyze_document(
                    file_uploaded["content"],
                    file_uploaded["extension"],
                    "income_certificate",
                    blob_url,
                    expected_name
                )
                
                if not result.get("is_valid"):
                    response = {
                        "message": result.get("validation_error"),
                        "type": "error",
                        "waiting_for": "income_certificate_upload"
                    }
                else:
                    session["documents"]["income_certificate"] = result
                    session["uploaded_docs"].append("income_certificate")
                    
                    fields = result.get("fields", {})
                    session["income_info"]["certificate_number"] = fields.get("certificate_number", "")
                    session["income_info"]["annual_income"] = fields.get("annual_income", "")
                    session["income_info"]["issue_date"] = fields.get("issue_date", "")
                    session["income_info"]["source"] = "income_certificate"
                    
                    session["step"] = "upload_bank_passbook"
                    
                    response = {
                        "message": MESSAGES["income_success"].format(
                            cert_no=fields.get("certificate_number", "Extracted"),
                            name=fields.get("holder_name", "Extracted"),
                            income=fields.get("annual_income", "Extracted")
                        ),
                        "type": "success",
                        "waiting_for": "bank_passbook_upload"
                    }
        else:
            response = {
                "message": MESSAGES["upload_prompt"].format(doc="Income Certificate"),
                "type": "text",
                "waiting_for": "income_certificate_upload"
            }
    
    # STEP 14: UPLOAD BANK PASSBOOK
    elif current_step == "upload_bank_passbook":
        if file_uploaded and file_uploaded.get("doc_type") == "bank_passbook":
            expected_name = session["personal_info"].get("name", "")
            application_id = session.get("application_id")
            
            blob_url = upload_to_blob(
                file_uploaded["content"],
                application_id,
                "bank_passbook",
                file_uploaded["extension"]
            )
            
            if not blob_url:
                response = {
                    "message": "‚ùå Upload failed",
                    "type": "error",
                    "waiting_for": "bank_passbook_upload"
                }
            else:
                result = doc_intelligence.analyze_document(
                    file_uploaded["content"],
                    file_uploaded["extension"],
                    "bank_passbook",
                    blob_url,
                    expected_name
                )
                
                if not result.get("is_valid"):
                    response = {
                        "message": result.get("validation_error"),
                        "type": "error",
                        "waiting_for": "bank_passbook_upload"
                    }
                else:
                    session["documents"]["bank_passbook"] = result
                    session["uploaded_docs"].append("bank_passbook")
                    
                    fields = result.get("fields", {})
                    session["bank_info"]["account_number"] = fields.get("account_number", "")
                    session["bank_info"]["ifsc"] = fields.get("ifsc_code", "")
                    session["bank_info"]["bank_name"] = fields.get("bank_name", "")
                    
                    session["step"] = "upload_photograph"
                    
                    account_display = mask_account(fields.get("account_number", ""))
                    
                    response = {
                        "message": MESSAGES["bank_success"].format(
                            holder=fields.get("account_holder_name", "Extracted"),
                            account=account_display,
                            ifsc=fields.get("ifsc_code", "Extracted"),
                            bank=fields.get("bank_name", "Extracted")
                        ),
                        "type": "success",
                        "waiting_for": "photograph_upload"
                    }
        else:
            response = {
                "message": MESSAGES["upload_prompt"].format(doc="Bank Passbook"),
                "type": "text",
                "waiting_for": "bank_passbook_upload"
            }
    
    # STEP 15: UPLOAD PHOTOGRAPH
    elif current_step == "upload_photograph":
        if file_uploaded and file_uploaded.get("doc_type") == "photograph":
            application_id = session.get("application_id")
            
            blob_url = upload_to_blob(
                file_uploaded["content"],
                application_id,
                "photograph",
                file_uploaded["extension"]
            )
            
            session["documents"]["photograph"] = {"file_path": blob_url, "is_valid": True, "blob_url": blob_url}
            session["uploaded_docs"].append("photograph")
            
            session["step"] = "final_review"
            
            name = session["personal_info"].get("name", "N/A")
            dob = session["personal_info"].get("dob", "N/A")
            age = session["personal_info"].get("age", "N/A")
            marital = session["personal_info"].get("marital_status", "N/A")
            mobile = session["contact_info"].get("mobile", "N/A")
            email = session["contact_info"].get("email", "Not provided")
            address = session["contact_info"].get("address", "N/A")
            
            aadhaar_masked = mask_aadhaar(session["extracted_data"].get("aadhaar_number", ""))
            account_masked = mask_account(session["bank_info"].get("account_number", ""))
            
            ifsc = session["bank_info"].get("ifsc", "N/A")
            bank_name = session["bank_info"].get("bank_name", "N/A")
            
            annual_income = session["income_info"].get("annual_income", "N/A")
            ration_type = session["income_info"].get("ration_card_type", "N/A")
            
            doc_count = len(session["uploaded_docs"])
            
            doc_list_items = []
            doc_list_items.append("‚úì Aadhaar Card")
            doc_list_items.append(f"‚úì {DOCUMENT_TYPES.get(session.get('domicile_proof_type', ''), 'Domicile Proof')}")
            if "income_certificate" in session["uploaded_docs"]:
                doc_list_items.append("‚úì Income Certificate")
            doc_list_items.append("‚úì Bank Passbook")
            doc_list_items.append("‚úì Photograph")
            doc_list = "\n".join(doc_list_items)
            
            response = {
                "message": MESSAGES["photo_success"].format(
                    name=name,
                    dob=dob,
                    age=age,
                    aadhaar=aadhaar_masked,
                    marital=marital,
                    mobile=mobile,
                    email=email,
                    address=address,
                    account=account_masked,
                    ifsc=ifsc,
                    bank=bank_name,
                    income=annual_income,
                    ration=ration_type,
                    count=doc_count,
                    doc_list=doc_list
                ),
                "type": "success",
                "waiting_for": "review_confirmation"
            }
        else:
            response = {
                "message": MESSAGES["upload_prompt"].format(doc="Photograph"),
                "type": "text",
                "waiting_for": "photograph_upload"
            }
    
    # STEP 16: FINAL REVIEW
    elif current_step == "final_review":
        if user_message.upper() == "YES":
            session["step"] = "declaration"
            response = {
                "message": MESSAGES["declaration"],
                "type": "info",
                "waiting_for": "declaration_confirm"
            }
        elif user_message.upper() == "NO":
            response = {
                "message": "Please specify what you want to change or type 'RESTART' to begin again:",
                "type": "info",
                "waiting_for": "edit_request"
            }
        else:
            response = {
                "message": "Please type 'YES' or 'NO':",
                "type": "text",
                "waiting_for": "review_confirmation"
            }
    
    # STEP 17: DECLARATION
    elif current_step == "declaration":
        if user_message.upper() == "I AGREE":
            session["step"] = "submit_application"
            session["declaration_accepted"] = True
            response = {
                "message": MESSAGES["declaration_accepted"],
                "type": "success",
                "waiting_for": "final_submit"
            }
        else:
            response = {
                "message": "Please type 'I AGREE' to accept the declaration:",
                "type": "error",
                "waiting_for": "declaration_confirm"
            }
    
    # STEP 18: SUBMIT APPLICATION
    elif current_step == "submit_application":
        if user_message.upper() == "SUBMIT":
            session["step"] = "processing"
            
            aadhaar_number = session["extracted_data"].get("aadhaar_number", "")
            if aadhaar_number and db_manager and db_manager.check_aadhaar_exists(aadhaar_number):
                session["step"] = "completed"
                response = {
                    "message": MESSAGES["aadhaar_exists"],
                    "type": "error",
                    "waiting_for": "restart"
                }
            else:
                application_id = session.get("application_id")
                
                if db_manager:
                    try:
                        dob_str = session["personal_info"].get("dob", "")
                        dob_date = parse_date(dob_str)
                        
                        annual_income_raw = session["income_info"].get("annual_income", 0)
                        try:
                            annual_income = float(annual_income_raw) if annual_income_raw and str(annual_income_raw).replace('.','').isdigit() else 0
                        except:
                            annual_income = 0
                        
                        beneficiary_data = {
                            "username": session["contact_info"].get("mobile", ""),
                            "password_hash": "",
                            "aadhaar_number": aadhaar_number,
                            "full_name": session["personal_info"].get("name", ""),
                            "date_of_birth": dob_date,
                            "gender": "F",
                            "mobile_number": session["contact_info"].get("mobile", ""),
                            "email": session["contact_info"].get("email", ""),
                            "address": session["contact_info"].get("address", ""),
                            "district": session["domicile_info"].get("district", ""),
                            "taluka": session["domicile_info"].get("taluka", ""),
                            "village": session["domicile_info"].get("village", ""),
                            "annual_income": annual_income,
                            "bank_account_no": session["bank_info"].get("account_number", ""),
                            "bank_ifsc": session["bank_info"].get("ifsc", "")
                        }
                        
                        beneficiary_id = db_manager.save_beneficiary_application(beneficiary_data, application_id)
                        session["beneficiary_id"] = beneficiary_id
                        
                        if beneficiary_id:
                            for doc_type in session["uploaded_docs"]:
                                doc_data = session["documents"].get(doc_type, {})
                                fields = doc_data.get("fields", {})
                                blob_url = doc_data.get("blob_url", "")
                                
                                document_entry = {
                                    "beneficiary_id": application_id,
                                    "mobile_number": session["contact_info"].get("mobile", ""),
                                    "aadhaar_number": aadhaar_number,
                                    "document_type": doc_type,
                                    "document_url": blob_url,
                                    "full_name": session["personal_info"].get("name", ""),
                                }
                                
                                if doc_type == "income_certificate":
                                    document_entry["income_certificate_number"] = fields.get("certificate_number")
                                    document_entry["income_cert_issue_date"] = parse_date(fields.get("issue_date", ""))
                                    try:
                                        document_entry["annual_income_amount"] = float(fields.get("annual_income", 0) or 0)
                                    except:
                                        document_entry["annual_income_amount"] = 0
                                
                                elif doc_type == "bank_passbook":
                                    document_entry["bank_account_number"] = fields.get("account_number")
                                    document_entry["bank_ifsc"] = fields.get("ifsc_code")
                                    document_entry["bank_name"] = fields.get("bank_name")
                                
                                elif doc_type == "domicile_certificate":
                                    document_entry["domicile_certificate_number"] = fields.get("certificate_number")
                                    document_entry["domicile_issuing_district"] = fields.get("district")
                                    document_entry["domicile_issue_date"] = parse_date(fields.get("issue_date", ""))
                                    document_entry["residence_district"] = fields.get("district")
                                    document_entry["residence_taluka"] = fields.get("taluka")
                                    document_entry["residence_village"] = fields.get("village")
                                
                                elif doc_type == "ration_card":
                                    document_entry["ration_card_number"] = fields.get("card_number")
                                    document_entry["ration_card_type"] = session["income_info"].get("ration_card_type")
                                    document_entry["ration_card_issue_date"] = parse_date(fields.get("issue_date", ""))
                                
                                elif doc_type == "voter_id":
                                    document_entry["voter_id_number"] = fields.get("voter_id_number")
                                
                                db_manager.save_document(document_entry)
                    
                    except Exception as e:
                        logger.error(f"Database save error: {e}")
                
                session["step"] = "completed"
                session["status"] = "SUBMITTED"
                session["submitted_at"] = datetime.now().isoformat()
                
                name = session["personal_info"].get("name", "Applicant")
                mobile = session["contact_info"].get("mobile", "XXXXXXXXXX")
                
                response = {
                    "message": MESSAGES["success"].format(name=name, app_id=application_id, mobile=mobile),
                    "type": "success",
                    "waiting_for": "none",
                    "application_id": application_id
                }
        else:
            response = {
                "message": "Type 'SUBMIT' to submit your application:",
                "type": "text",
                "waiting_for": "final_submit"
            }
    
    # STEP 19: COMPLETED
    elif current_step == "completed":
        response = {
            "message": MESSAGES["restart_prompt"].format(app_id=session.get('application_id', 'N/A')),
            "type": "success",
            "waiting_for": "restart"
        }
    
    else:
        response = {
            "message": MESSAGES["error"],
            "type": "error",
            "waiting_for": "restart"
        }
    
    session["conversation"].append({"role": "assistant", "message": response["message"]})
    return response


# ============================================
# ROUTES
# ============================================

@app.post("/api/chat")
async def chat_endpoint(
    session_id: str = Form(...),
    message: str = Form(""),
    file: Optional[UploadFile] = File(None),
    doc_type: str = Form("aadhaar")
):
    try:
        file_uploaded = None
        
        if file and file.filename:
            file_content = await file.read()
            file_extension = Path(file.filename).suffix
            
            file_uploaded = {
                "content": file_content,
                "name": file.filename,
                "extension": file_extension,
                "doc_type": doc_type
            }
        
        response = get_bot_response(session_id, message, file_uploaded)
        return response
        
    except Exception as e:
        logger.error(f"Error: {e}")
        return JSONResponse({"error": str(e), "message": "An error occurred. Please try again."}, status_code=500)


@app.post("/api/start-session")
async def start_session():
    session_id = str(uuid.uuid4())
    response = get_bot_response(session_id)
    return {"session_id": session_id, "message": response["message"]}


@app.get("/health")
async def health_check():
    """Health check endpoint"""
    return {
        "status": "healthy",
        "blob_storage": "connected" if container_client else "disconnected",
        "azure_openai": "connected" if openai_client else "disconnected"
    }


if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=5000)